{
"version":3,
"file":"cc_nav.js",
"sourceRoot":"file:///",
"sources":["/Users/matthijs/Documents/GIT/drop-in-off-canvas-menu/src/Main.hx"],
"sourcesContent":["package;\n\nimport js.Browser.*;\nimport js.html.XMLHttpRequest;\n\nclass Main {\n\tvar url = \"nav.html\";\n\tvar req = new XMLHttpRequest();\n\n\tpublic function new() {\n\t\ttrace('cc-nav: a drop in off-canvas menu');\n\n\t\t// ficons add to document\n\t\tvar link = document.createLinkElement();\n\t\tlink.href = \"https://cdn.jsdelivr.net/npm/ficons@1.1.52/dist/ficons/font.css\";\n\t\tlink.rel = \"stylesheet\";\n\t\tdocument.head.appendChild(link);\n\n\t\t// for now monkee.style is added as well\n\t\tvar link = document.createLinkElement();\n\t\tlink.href = \"https://matthijskamstra.github.io/monkee-style/dist/monkee.css\";\n\t\tlink.rel = \"stylesheet\";\n\t\tdocument.head.appendChild(link);\n\n\t\t// basic stuff for menu at the top of body\n\t\tvar input = htmlToElement('<input type=\"checkbox\" id=\"menu-toggle\" />');\n\t\tvar label = htmlToElement('<label for=\"menu-toggle\" class=\"menu-icon\"><i class=\"fa fa-bars\"></i></label>');\n\t\tdocument.body.prepend(label);\n\t\tdocument.body.prepend(input);\n\n\t\t// nav\n\t\tvar nav = document.createElement('nav');\n\t\tnav.id = \"storage\";\n\t\tnav.className = \"slideout-sidebar\";\n\t\tdocument.body.append(nav);\n\n\t\t// storage\n\t\tloadHTML(url, nav);\n\t}\n\n\tfunction htmlToElement(html:String) {\n\t\tvar template = document.createDivElement();\n\t\thtml = untyped html.trim(); // Never return a text node of whitespace as the result\n\t\ttemplate.innerHTML = html;\n\t\treturn template.firstChild;\n\t}\n\n\tfunction loadHTML(?url:String, ?el:js.html.Element) {\n\t\t// your code\n\t\treq.open('GET', url);\n\t\treq.onload = function() {\n\t\t\tvar body = getBody(req.response);\n\t\t\tif (body == \"\")\n\t\t\t\tbody = req.response;\n\t\t\tprocessHTML(body, el);\n\t\t};\n\t\treq.onerror = function(error) {\n\t\t\tconsole.error('[JS] error: $error');\n\t\t};\n\t\treq.send();\n\t}\n\n\t/**\n\t * get the body of the document...\n\t * but I really don't need all html to have a navigation\n\t *\n\t * @param html\n\t */\n\tfunction getBody(html) {\n\t\tvar test:String = html.toLowerCase(); // to eliminate case sensitivity\n\t\tvar x:Int = test.indexOf(\"<body\");\n\t\tif (x == -1)\n\t\t\treturn \"\";\n\n\t\tx = test.indexOf(\">\", x);\n\t\tif (x == -1)\n\t\t\treturn \"\";\n\t\tvar y = test.lastIndexOf(\"</body>\");\n\t\tif (y == -1)\n\t\t\ty = test.lastIndexOf(\"</html>\");\n\t\tif (y == -1)\n\t\t\ty = html.length; // If no HTML then just grab everything till end\n\t\treturn html.slice(x + 1, y);\n\t}\n\n\tfunction processHTML(content:String, target:js.html.Element) {\n\t\ttarget.innerHTML = content;\n\t}\n\n\tstatic public function main() {\n\t\tvar app = new Main();\n\t}\n}\n"],
"names":[],
"mappings":";;WASC,WAJD;AAAA,CAEW,AAAV,WAAU;AAFX,CACW,AAAV,WAAU;AADX,CAKE,8BAAO;AALT,CAQE,WAAW;AARb,CASE,YAAY;AATd,CAUE,WAAW;AAVb,CAWE,iCAA0B;AAX5B,CAcE,YAAW;AAdb,CAeE,aAAY;AAfd,CAgBE,YAAW;AAhBb,CAiBE,iCAA0B;AAjB5B,CAoBE,YAAY,mBAAe;AApB7B,CAqBE,YAAY,mBAAe;AArB7B,CAsBE,6BAAsB;AAtBxB,CAuBE,6BAAsB;AAvBxB,CA0BE,UAAU,8BAAwB;AA1BpC,CA2BE,SAAS;AA3BX,CA4BE,gBAAgB;AA5BlB,CA6BE,4BAAqB;AA7BvB,CAgCE,cAAS,SAAK;AAhChB;YAoFC,WACC;AAAA,WAAU;AAAV;;gBAlDD,eAAoC;AAAA,EACnC,eAAe;AADoB,EAEnC,OAAe;AAFoB,EAGnC,qBAAqB;AAHc,EAInC,OAAO;AAJ4B;YAOpC,iBAAoD;AAAA,EAApD;AAAoD,EAEnD,cAAU,MAAM;AAFmC,EAGnD,kBAAa,WAAW;AAAA,GACvB,WAAW,eAAQ;AADI,GAEvB,EAAI,SAAQ,IACX;AAAA,WAAO;AAAP;AAHsB,GAIvB,mBAAY,KAAM;AAJK;AAH2B,EASnD,mBAAc,gBACb;AAAA,wBAAe,iBAAa;AAA5B;AAVkD,EAYnD;AAZmD;WAqBpD,eAAuB;AAAA,EACtB,WAAkB;AADI,EAEtB,QAAY,aAAa;AAFH,EAGtB,EAAI,MAAK,IACR;AAAA,UAAO;AAAP;AAJqB,EAMtB,IAAI,aAAa,IAAK;AANA,EAOtB,EAAI,MAAK,IACR;AAAA,UAAO;AAAP;AARqB,EAStB,QAAQ,iBAAiB;AATH,EAUtB,EAAI,MAAK,IACR;AAAA,OAAI,iBAAiB;AAArB;AAXqB,EAYtB,EAAI,MAAK,IACR;AAAA,OAAI;AAAJ;AAbqB,EActB,OAAO,WAAW,IAAI,EAAG;AAdH;eAiBvB,yBACC;AAAA,qBAAmB;AAAnB;;;;;"
}