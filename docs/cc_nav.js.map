{
"version":3,
"file":"cc_nav.js",
"sourceRoot":"file:///",
"sources":["/Users/matthijs/Documents/GIT/drop-in-off-canvas-menu/src/Main.hx"],
"sourcesContent":["package;\n\nimport js.Browser.*;\nimport js.html.XMLHttpRequest;\n\nclass Main {\n\tvar url = \"nav.html\";\n\tvar req = new XMLHttpRequest();\n\n\tpublic function new() {\n\t\ttrace('cc-nav: a drop in off-canvas menu');\n\n\t\tvar css = \":root{--black:#212121;--white:#ffffff;--sidebar-width:250px;--icon-padding:20px;--icon-left:20px}body{margin:0;padding:0}.slideout-sidebar{font-family:Arial,Helvetica,sans-serif;z-index:0;position:fixed;top:0;left:calc(-1 * var(--sidebar-width));width:var(--sidebar-width);height:100%;background-color:var(--black);transition:.3s ease-in-out;overflow:scroll;padding:0;margin:0}.slideout-sidebar a{color:var(--white);outline:0;text-decoration:none;font-size:.8rem}.slideout-sidebar ul{list-style:none;margin:0;padding:20px}.slideout-sidebar ul li{cursor:pointer;padding:18px 0;border-bottom:1px solid rgba(244,244,244,.4)}.slideout-sidebar ul li:last-child{border-bottom:0}#menu-toggle{display:none}.menu-icon{position:absolute;top:0;left:0;font-size:30px;z-index:20000;transition:.3s ease-in-out;padding:var(--icon-padding);cursor:pointer;color:var(--black)}#menu-toggle:checked~.slideout-sidebar{left:0}#menu-toggle:checked+.menu-icon{left:calc(var(--icon-left) + var(--sidebar-width))}\";\n\t\tvar style = document.createStyleElement();\n\t\tstyle.innerText = css;\n\t\tdocument.head.appendChild(style);\n\n\t\t// basic stuff for menu at the top of body\n\t\tvar input = htmlToElement('<input type=\"checkbox\" id=\"menu-toggle\" />');\n\t\tvar label = htmlToElement('<label for=\"menu-toggle\" class=\"menu-icon\">&#9776;</label>');\n\t\tdocument.body.prepend(label);\n\t\tdocument.body.prepend(input);\n\n\t\t// nav\n\t\tvar nav = document.createElement('nav');\n\t\tnav.id = \"storage\";\n\t\tnav.className = \"slideout-sidebar\";\n\t\tdocument.body.append(nav);\n\n\t\t// storage\n\t\tloadHTML(url, nav);\n\t}\n\n\tfunction htmlToElement(html:String) {\n\t\tvar template = document.createDivElement();\n\t\thtml = untyped html.trim(); // Never return a text node of whitespace as the result\n\t\ttemplate.innerHTML = html;\n\t\treturn template.firstChild;\n\t}\n\n\tfunction loadHTML(?url:String, ?el:js.html.Element) {\n\t\t// your code\n\t\treq.open('GET', url);\n\t\treq.onload = function() {\n\t\t\tvar body = getBody(req.response);\n\t\t\tif (body == \"\")\n\t\t\t\tbody = req.response;\n\t\t\tprocessHTML(body, el);\n\t\t};\n\t\treq.onerror = function(error) {\n\t\t\tconsole.error('[JS] error: $error');\n\t\t};\n\t\treq.send();\n\t}\n\n\t/**\n\t * get the body of the document...\n\t * but I really don't need all html to have a navigation\n\t *\n\t * @param html\n\t */\n\tfunction getBody(html) {\n\t\tvar test:String = html.toLowerCase(); // to eliminate case sensitivity\n\t\tvar x:Int = test.indexOf(\"<body\");\n\t\tif (x == -1)\n\t\t\treturn \"\";\n\n\t\tx = test.indexOf(\">\", x);\n\t\tif (x == -1)\n\t\t\treturn \"\";\n\t\tvar y = test.lastIndexOf(\"</body>\");\n\t\tif (y == -1)\n\t\t\ty = test.lastIndexOf(\"</html>\");\n\t\tif (y == -1)\n\t\t\ty = html.length; // If no HTML then just grab everything till end\n\t\treturn html.slice(x + 1, y);\n\t}\n\n\tfunction processHTML(content:String, target:js.html.Element) {\n\t\ttarget.innerHTML = content;\n\t}\n\n\tstatic public function main() {\n\t\tvar app = new Main();\n\t}\n}\n"],
"names":[],
"mappings":";;WASC,WAJD;AAAA,CAEW,AAAV,WAAU;AAFX,CACW,AAAV,WAAU;AADX,CAKE,8BAAO;AALT,CAOE,UAAU;AAPZ,CAQE,YAAY;AARd,CASE,kBAAkB;AATpB,CAUE,iCAA0B;AAV5B,CAaE,YAAY,mBAAe;AAb7B,CAcE,YAAY,mBAAe;AAd7B,CAeE,6BAAsB;AAfxB,CAgBE,6BAAsB;AAhBxB,CAmBE,UAAU,8BAAwB;AAnBpC,CAoBE,SAAS;AApBX,CAqBE,gBAAgB;AArBlB,CAsBE,4BAAqB;AAtBvB,CAyBE,cAAS,SAAK;AAzBhB;YA6EC,WACC;AAAA,WAAU;AAAV;;gBAlDD,eAAoC;AAAA,EACnC,eAAe;AADoB,EAEnC,OAAe;AAFoB,EAGnC,qBAAqB;AAHc,EAInC,OAAO;AAJ4B;YAOpC,iBAAoD;AAAA,EAApD;AAAoD,EAEnD,cAAU,MAAM;AAFmC,EAGnD,kBAAa,WAAW;AAAA,GACvB,WAAW,eAAQ;AADI,GAEvB,EAAI,SAAQ,IACX;AAAA,WAAO;AAAP;AAHsB,GAIvB,mBAAY,KAAM;AAJK;AAH2B,EASnD,mBAAc,gBACb;AAAA,wBAAe,iBAAa;AAA5B;AAVkD,EAYnD;AAZmD;WAqBpD,eAAuB;AAAA,EACtB,WAAkB;AADI,EAEtB,QAAY,aAAa;AAFH,EAGtB,EAAI,MAAK,IACR;AAAA,UAAO;AAAP;AAJqB,EAMtB,IAAI,aAAa,IAAK;AANA,EAOtB,EAAI,MAAK,IACR;AAAA,UAAO;AAAP;AARqB,EAStB,QAAQ,iBAAiB;AATH,EAUtB,EAAI,MAAK,IACR;AAAA,OAAI,iBAAiB;AAArB;AAXqB,EAYtB,EAAI,MAAK,IACR;AAAA,OAAI;AAAJ;AAbqB,EActB,OAAO,WAAW,IAAI,EAAG;AAdH;eAiBvB,yBACC;AAAA,qBAAmB;AAAnB;;;;;"
}